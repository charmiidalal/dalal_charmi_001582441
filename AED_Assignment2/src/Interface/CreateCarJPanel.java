/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Interface;
import Business.Car;
import Business.CarCatalog;
import java.awt.CardLayout;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

/**
 *
 * @author manushpatel
 */
public class CreateCarJPanel extends javax.swing.JPanel {
    /* Initialize variables of card layout */
    private JPanel menuContainer;
    private CarCatalog carCatalog;
    /**
     * Creates new form CreateCarJpanel
     */
    CreateCarJPanel(JPanel menuContainer, CarCatalog carCatalog) {
        initComponents();
        this.menuContainer = menuContainer;
        this.carCatalog = carCatalog;
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("E, MMM dd yyyy HH:mm:ss");
        String currDate = simpleDateFormat.format(new Date());
        txtDateTimeAvailable.setText(currDate);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblCreateCar = new javax.swing.JLabel();
        txtCarName = new javax.swing.JTextField();
        lblCarName = new javax.swing.JLabel();
        lblDateTimeAvailable = new javax.swing.JLabel();
        txtDateTimeAvailable = new javax.swing.JTextField();
        lblSerialNo = new javax.swing.JLabel();
        txtManufacturerName = new javax.swing.JTextField();
        txtManufactureYear = new javax.swing.JTextField();
        lblCityName = new javax.swing.JLabel();
        txtSeatCapacity = new javax.swing.JTextField();
        txtModelNo = new javax.swing.JTextField();
        txtCityName = new javax.swing.JTextField();
        txtSerialNo = new javax.swing.JTextField();
        lblManufactureYear = new javax.swing.JLabel();
        lblIsAvailable = new javax.swing.JLabel();
        lblManufacturerName = new javax.swing.JLabel();
        lblModelNo = new javax.swing.JLabel();
        lblSeatCapacity = new javax.swing.JLabel();
        lblIsExpired = new javax.swing.JLabel();
        chckBoxIsAvailable = new javax.swing.JCheckBox();
        checkBoxIsExpired = new javax.swing.JCheckBox();
        btnSaveCar = new javax.swing.JButton();
        btnBack = new javax.swing.JButton();

        setBackground(new java.awt.Color(255, 255, 255));

        lblCreateCar.setFont(new java.awt.Font("Lucida Grande", 1, 18)); // NOI18N
        lblCreateCar.setText("Create Car");

        txtCarName.setBackground(new java.awt.Color(153, 153, 153));
        txtCarName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtCarNameActionPerformed(evt);
            }
        });

        lblCarName.setFont(new java.awt.Font("Lucida Grande", 1, 13)); // NOI18N
        lblCarName.setText("Name:");

        lblDateTimeAvailable.setFont(new java.awt.Font("Lucida Grande", 1, 13)); // NOI18N
        lblDateTimeAvailable.setText("Time Available:");

        txtDateTimeAvailable.setBackground(new java.awt.Color(153, 153, 153));
        txtDateTimeAvailable.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtDateTimeAvailableActionPerformed(evt);
            }
        });

        lblSerialNo.setFont(new java.awt.Font("Lucida Grande", 1, 13)); // NOI18N
        lblSerialNo.setText("Serial No:");

        txtManufacturerName.setBackground(new java.awt.Color(153, 153, 153));
        txtManufacturerName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtManufacturerNameActionPerformed(evt);
            }
        });

        txtManufactureYear.setBackground(new java.awt.Color(153, 153, 153));
        txtManufactureYear.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtManufactureYearActionPerformed(evt);
            }
        });

        lblCityName.setFont(new java.awt.Font("Lucida Grande", 1, 13)); // NOI18N
        lblCityName.setText("City:");

        txtSeatCapacity.setBackground(new java.awt.Color(153, 153, 153));
        txtSeatCapacity.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtSeatCapacityActionPerformed(evt);
            }
        });

        txtModelNo.setBackground(new java.awt.Color(153, 153, 153));
        txtModelNo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtModelNoActionPerformed(evt);
            }
        });

        txtCityName.setBackground(new java.awt.Color(153, 153, 153));
        txtCityName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtCityNameActionPerformed(evt);
            }
        });

        txtSerialNo.setBackground(new java.awt.Color(153, 153, 153));
        txtSerialNo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtSerialNoActionPerformed(evt);
            }
        });

        lblManufactureYear.setFont(new java.awt.Font("Lucida Grande", 1, 13)); // NOI18N
        lblManufactureYear.setText("Manufacture Year:");

        lblIsAvailable.setFont(new java.awt.Font("Lucida Grande", 1, 13)); // NOI18N
        lblIsAvailable.setText("Is Available:");

        lblManufacturerName.setFont(new java.awt.Font("Lucida Grande", 1, 13)); // NOI18N
        lblManufacturerName.setText("Manufacturer Name:");

        lblModelNo.setFont(new java.awt.Font("Lucida Grande", 1, 13)); // NOI18N
        lblModelNo.setText("Model No:");

        lblSeatCapacity.setFont(new java.awt.Font("Lucida Grande", 1, 13)); // NOI18N
        lblSeatCapacity.setText("Seat Capacity:");

        lblIsExpired.setFont(new java.awt.Font("Lucida Grande", 1, 13)); // NOI18N
        lblIsExpired.setText("Is Expired:");

        chckBoxIsAvailable.setBackground(new java.awt.Color(153, 153, 153));

        checkBoxIsExpired.setBackground(new java.awt.Color(153, 153, 153));

        btnSaveCar.setBackground(new java.awt.Color(51, 51, 51));
        btnSaveCar.setFont(new java.awt.Font("Lucida Grande", 1, 13)); // NOI18N
        btnSaveCar.setForeground(new java.awt.Color(255, 255, 255));
        btnSaveCar.setText("Save");
        btnSaveCar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSaveCarActionPerformed(evt);
            }
        });

        btnBack.setBackground(new java.awt.Color(51, 51, 51));
        btnBack.setFont(new java.awt.Font("Lucida Grande", 1, 13)); // NOI18N
        btnBack.setForeground(new java.awt.Color(255, 255, 255));
        btnBack.setText("< Back");
        btnBack.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBackActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(366, 366, 366)
                .addComponent(lblCreateCar, javax.swing.GroupLayout.PREFERRED_SIZE, 169, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(txtSeatCapacity, javax.swing.GroupLayout.PREFERRED_SIZE, 165, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(16, 16, 16)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(lblCarName)
                                    .addComponent(lblDateTimeAvailable)
                                    .addComponent(lblSerialNo)
                                    .addComponent(lblCityName)
                                    .addComponent(lblManufactureYear))
                                .addGap(54, 54, 54)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addComponent(txtSerialNo, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 200, Short.MAX_VALUE)
                                    .addComponent(txtManufactureYear, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(txtDateTimeAvailable, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(txtCarName, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(txtCityName)))
                            .addComponent(btnBack, javax.swing.GroupLayout.PREFERRED_SIZE, 109, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 63, Short.MAX_VALUE)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(btnSaveCar, javax.swing.GroupLayout.PREFERRED_SIZE, 108, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(lblIsAvailable)
                            .addComponent(lblSeatCapacity)
                            .addComponent(lblManufacturerName)
                            .addComponent(lblModelNo)
                            .addComponent(lblIsExpired))
                        .addGap(19, 19, 19)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(checkBoxIsExpired)
                                .addComponent(txtModelNo, javax.swing.GroupLayout.PREFERRED_SIZE, 165, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(layout.createSequentialGroup()
                                .addGap(38, 38, 38)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(chckBoxIsAvailable)
                                    .addComponent(txtManufacturerName, javax.swing.GroupLayout.PREFERRED_SIZE, 165, javax.swing.GroupLayout.PREFERRED_SIZE))))))
                .addGap(79, 79, 79))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addComponent(lblCreateCar, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(29, 29, 29)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(txtCarName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(lblCarName)
                        .addComponent(lblIsAvailable))
                    .addComponent(chckBoxIsAvailable))
                .addGap(26, 26, 26)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtDateTimeAvailable, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblDateTimeAvailable)
                    .addComponent(lblManufacturerName)
                    .addComponent(txtManufacturerName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(29, 29, 29)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblSeatCapacity)
                            .addComponent(txtSeatCapacity, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addComponent(txtModelNo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(37, 37, 37)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(txtManufactureYear, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(lblManufactureYear))
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblModelNo)
                            .addComponent(txtSerialNo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(lblSerialNo))))
                .addGap(27, 27, 27)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(checkBoxIsExpired)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(lblIsExpired)
                        .addComponent(txtCityName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(lblCityName)))
                .addGap(60, 60, 60)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnSaveCar)
                    .addComponent(btnBack))
                .addContainerGap(194, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void txtCarNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtCarNameActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtCarNameActionPerformed

    private void txtDateTimeAvailableActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtDateTimeAvailableActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtDateTimeAvailableActionPerformed

    private void txtManufacturerNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtManufacturerNameActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtManufacturerNameActionPerformed

    private void txtManufactureYearActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtManufactureYearActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtManufactureYearActionPerformed

    private void txtSeatCapacityActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtSeatCapacityActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtSeatCapacityActionPerformed

    private void txtModelNoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtModelNoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtModelNoActionPerformed

    private void txtCityNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtCityNameActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtCityNameActionPerformed

    private void txtSerialNoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtSerialNoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtSerialNoActionPerformed

    private void btnBackActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBackActionPerformed
         /* Travese to prev window on click of back button */
        menuContainer.remove(this);
        CardLayout layout = (CardLayout) menuContainer.getLayout();
        layout.previous(menuContainer);
    }//GEN-LAST:event_btnBackActionPerformed

    private void btnSaveCarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSaveCarActionPerformed
        // TODO add your handling code here:
        /* Check if all the fields are not empty */
        if(txtCarName.getText().equals("") || txtCityName.getText().equals("")
           || txtDateTimeAvailable.getText().equals("") || txtManufacturerName.getText().equals("")
           || txtManufactureYear.getText().equals("") || txtSeatCapacity.getText().equals("")
           || txtSerialNo.getText().equals("") || txtModelNo.getText().equals(""))
        {
            JOptionPane.showMessageDialog(null, "Please fill out all fields.");
        }else if(txtCityName.getText().matches("[0-9]+")){
            JOptionPane.showMessageDialog(null, "Please enter only alphabet "
            + "value for Bank Name!");
        }
        else if(!txtSeatCapacity.getText().matches("[0-9]+") || !txtManufactureYear.getText().matches("[0-9]+")){
            JOptionPane.showMessageDialog(null, "Please enter integer value for Seat and Manufacture Year !");
        }else{
            /* Add car details in Car Array */
            Car car = new Car();

            car.setCarName(txtCarName.getText());
            car.setCity(txtCityName.getText());
            try { 
                SimpleDateFormat formatter5=new SimpleDateFormat("E, MMM dd yyyy HH:mm:ss");  
                //Date d = DateFormat.getDateInstance().parse(txtDateTimeAvailable.getText());
                car.setTimeAvailable(formatter5.parse(txtDateTimeAvailable.getText()));
            } catch (ParseException ex) {
                Logger.getLogger(CreateCarJPanel.class.getName()).log(Level.SEVERE, null, ex);
            }
            car.setIsExpired(checkBoxIsExpired.isSelected());
            car.setManufacturerName(txtManufacturerName.getText());
            car.setManufactureYear(Integer.parseInt(txtManufactureYear.getText()));
            car.setSeatCapacity(Integer.parseInt(txtSeatCapacity.getText()));
            car.setSerialNo(txtSerialNo.getText());
            car.setModelNo(txtModelNo.getText());
            car.setCity(txtCityName.getText());
            car.setIsAvailable(chckBoxIsAvailable.isSelected());
            if(carCatalog.addCar(car))
            {
                JOptionPane.showMessageDialog(null, "Car Details Added Successfully.");
            }
            else{
                JOptionPane.showMessageDialog(null, "Duplicate Car Detail Already Exists.");
            }
        }
    }//GEN-LAST:event_btnSaveCarActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnBack;
    private javax.swing.JButton btnSaveCar;
    private javax.swing.JCheckBox chckBoxIsAvailable;
    private javax.swing.JCheckBox checkBoxIsExpired;
    private javax.swing.JLabel lblCarName;
    private javax.swing.JLabel lblCityName;
    private javax.swing.JLabel lblCreateCar;
    private javax.swing.JLabel lblDateTimeAvailable;
    private javax.swing.JLabel lblIsAvailable;
    private javax.swing.JLabel lblIsExpired;
    private javax.swing.JLabel lblManufactureYear;
    private javax.swing.JLabel lblManufacturerName;
    private javax.swing.JLabel lblModelNo;
    private javax.swing.JLabel lblSeatCapacity;
    private javax.swing.JLabel lblSerialNo;
    private javax.swing.JTextField txtCarName;
    private javax.swing.JTextField txtCityName;
    private javax.swing.JTextField txtDateTimeAvailable;
    private javax.swing.JTextField txtManufactureYear;
    private javax.swing.JTextField txtManufacturerName;
    private javax.swing.JTextField txtModelNo;
    private javax.swing.JTextField txtSeatCapacity;
    private javax.swing.JTextField txtSerialNo;
    // End of variables declaration//GEN-END:variables
}
